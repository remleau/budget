{"ast":null,"code":"var _jsxFileName = \"/Users/remygroleau/Documents/dev/remleau/budget/src/hooks/useNotifications.js\",\n  _s = $RefreshSig$();\nimport { useMemo, useCallback, useState, useEffect } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { ROUTES } from \"../utils/Routes\";\nimport { useGlobalContext } from \"../utils/GlobalProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction useNotifications() {\n  _s();\n  const {\n    pb\n  } = useGlobalContext();\n  const [method, setMethod] = useState(null);\n  const [notifications, setNotifications] = useState(null);\n  const [formError, setFormError] = useState(null);\n  useEffect(() => {\n    pb.beforeSend = function (url, options) {\n      setNotifications(null);\n      setMethod(options.method);\n      return {\n        url,\n        options\n      };\n    };\n    pb.afterSend = function (response, data) {\n      if (response.status !== 200) {\n        console.log(data.data);\n        data.map(item => {\n          console.log(\"here\", item);\n        });\n        setNotifications(() => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: data === null || data === void 0 ? void 0 : data.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 28\n        }, this));\n      }\n      console.log(method, data);\n      switch (data === null || data === void 0 ? void 0 : data.collectionName) {\n        case \"categories\":\n          setNotifications(() => /*#__PURE__*/_jsxDEV(NavLink, {\n            to: ROUTES.CATEGORIE.replace(\":id\", data === null || data === void 0 ? void 0 : data.id.toString()),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Categorie \", data === null || data === void 0 ? void 0 : data.name, \" added\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 7\n          }, this));\n          break;\n        case \"users\":\n          if (method === \"PATCH\") setNotifications(() => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Updated account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 30\n          }, this));\n          break;\n        default:\n          break;\n      }\n      return data;\n    };\n  }, [method, notifications]);\n  return useMemo(() => {\n    return notifications;\n  });\n}\n_s(useNotifications, \"IU6pglF/VVBYlDniSLWp7UxtJrw=\", false, function () {\n  return [useGlobalContext];\n});\nexport default useNotifications;","map":{"version":3,"names":["useMemo","useCallback","useState","useEffect","NavLink","ROUTES","useGlobalContext","jsxDEV","_jsxDEV","useNotifications","_s","pb","method","setMethod","notifications","setNotifications","formError","setFormError","beforeSend","url","options","afterSend","response","data","status","console","log","map","item","children","message","fileName","_jsxFileName","lineNumber","columnNumber","collectionName","to","CATEGORIE","replace","id","toString","name"],"sources":["/Users/remygroleau/Documents/dev/remleau/budget/src/hooks/useNotifications.js"],"sourcesContent":["import { useMemo, useCallback, useState, useEffect } from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport { ROUTES } from \"../utils/Routes\";\nimport { useGlobalContext } from \"../utils/GlobalProvider\";\n\nfunction useNotifications() {\n\tconst { pb } = useGlobalContext();\n\n\tconst [method, setMethod] = useState(null);\n\tconst [notifications, setNotifications] = useState(null);\n\tconst [formError, setFormError] = useState(null);\n\n\tuseEffect(() => {\n\t\tpb.beforeSend = function (url, options) {\n\t\t\tsetNotifications(null);\n\t\t\tsetMethod(options.method);\n\t\t\treturn { url, options };\n\t\t};\n\n\t\tpb.afterSend = function (response, data) {\n\t\t\tif (response.status !== 200) {\n\t\t\t\tconsole.log(data.data);\n\t\t\t\tdata.map((item) => {\n\t\t\t\t\tconsole.log(\"here\", item);\n\t\t\t\t});\n\t\t\t\tsetNotifications(() => <div>{data?.message}</div>);\n\t\t\t}\n\n\t\t\tconsole.log(method, data);\n\n\t\t\tswitch (data?.collectionName) {\n\t\t\t\tcase \"categories\":\n\t\t\t\t\tsetNotifications(() => (\n\t\t\t\t\t\t<NavLink to={ROUTES.CATEGORIE.replace(\":id\", data?.id.toString())}>\n\t\t\t\t\t\t\t<div>Categorie {data?.name} added</div>\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"users\":\n\t\t\t\t\tif (method === \"PATCH\")\n\t\t\t\t\t\tsetNotifications(() => <div>Updated account</div>);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn data;\n\t\t};\n\t}, [method, notifications]);\n\n\treturn useMemo(() => {\n\t\treturn notifications;\n\t});\n}\n\nexport default useNotifications;\n"],"mappings":";;AAAA,SAASA,OAAO,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACjE,SAASC,OAAO,QAAQ,kBAAkB;AAE1C,SAASC,MAAM,QAAQ,iBAAiB;AACxC,SAASC,gBAAgB,QAAQ,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,SAASC,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EAC3B,MAAM;IAAEC;EAAG,CAAC,GAAGL,gBAAgB,EAAE;EAEjC,MAAM,CAACM,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACY,aAAa,EAAEC,gBAAgB,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACc,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACfQ,EAAE,CAACO,UAAU,GAAG,UAAUC,GAAG,EAAEC,OAAO,EAAE;MACvCL,gBAAgB,CAAC,IAAI,CAAC;MACtBF,SAAS,CAACO,OAAO,CAACR,MAAM,CAAC;MACzB,OAAO;QAAEO,GAAG;QAAEC;MAAQ,CAAC;IACxB,CAAC;IAEDT,EAAE,CAACU,SAAS,GAAG,UAAUC,QAAQ,EAAEC,IAAI,EAAE;MACxC,IAAID,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QAC5BC,OAAO,CAACC,GAAG,CAACH,IAAI,CAACA,IAAI,CAAC;QACtBA,IAAI,CAACI,GAAG,CAAEC,IAAI,IAAK;UAClBH,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEE,IAAI,CAAC;QAC1B,CAAC,CAAC;QACFb,gBAAgB,CAAC,mBAAMP,OAAA;UAAAqB,QAAA,EAAMN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEO;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAO,CAAC;MACnD;MAEAT,OAAO,CAACC,GAAG,CAACd,MAAM,EAAEW,IAAI,CAAC;MAEzB,QAAQA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,cAAc;QAC3B,KAAK,YAAY;UAChBpB,gBAAgB,CAAC,mBAChBP,OAAA,CAACJ,OAAO;YAACgC,EAAE,EAAE/B,MAAM,CAACgC,SAAS,CAACC,OAAO,CAAC,KAAK,EAAEf,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEgB,EAAE,CAACC,QAAQ,EAAE,CAAE;YAAAX,QAAA,eACjErB,OAAA;cAAAqB,QAAA,GAAK,YAAU,EAACN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEkB,IAAI,EAAC,QAAM;YAAA;cAAAV,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAAM;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAExC,CAAC;UACF;QACD,KAAK,OAAO;UACX,IAAItB,MAAM,KAAK,OAAO,EACrBG,gBAAgB,CAAC,mBAAMP,OAAA;YAAAqB,QAAA,EAAK;UAAe;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAM,CAAC;UACnD;QAED;UACC;MAAM;MAGR,OAAOX,IAAI;IACZ,CAAC;EACF,CAAC,EAAE,CAACX,MAAM,EAAEE,aAAa,CAAC,CAAC;EAE3B,OAAOd,OAAO,CAAC,MAAM;IACpB,OAAOc,aAAa;EACrB,CAAC,CAAC;AACH;AAACJ,EAAA,CAjDQD,gBAAgB;EAAA,QACTH,gBAAgB;AAAA;AAkDhC,eAAeG,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}